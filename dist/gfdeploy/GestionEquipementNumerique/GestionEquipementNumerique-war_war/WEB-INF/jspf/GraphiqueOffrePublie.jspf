<%-- any content can be specified here e.g.: --%>
<<<<<<< HEAD
<%@page import="com.google.gson.GsonBuilder"%>
<%@page import="com.google.gson.Gson"%>
<%@page import="java.util.List"%>
<%@page import="Entite.Offre"%>
<%@ page pageEncoding="UTF-8" %>
<jsp:useBean id="dataOffres" scope="request" class="java.util.List"></jsp:useBean>


=======
<%@ page pageEncoding="UTF-8" %>
>>>>>>> main

<div class="chart">
    <canvas id="offrePublie"></canvas>
</div>

<<<<<<< HEAD
<%
    Gson gson = new Gson();
    String dataOffres_json = gson.toJson(dataOffres);
%>


<script>

let data = <%=dataOffres_json%>;
console.log(data);

// Traitement des données pour compter le nombre d'offres publiées par mois
let offersByMonth = {};
data.forEach(function(offer) {
    let month = offer.date.getMonth() + 1; // Récupérer le mois (1-12)
    let year = offer.date.getFullYear(); // Récupérer l'année

    // Créer une clé unique pour le mois et l'année
    let key = year + '-' + month;
=======
<script>
    // Supposons que vous ayez un tableau 'data' contenant les données récupérées de la base de données

// Traitement des données pour compter le nombre d'offres publiées par mois
var offersByMonth = {};
data.forEach(function(offer) {
    var month = offer.date.getMonth() + 1; // Récupérer le mois (1-12)
    var year = offer.date.getFullYear(); // Récupérer l'année

    // Créer une clé unique pour le mois et l'année
    var key = year + '-' + month;
>>>>>>> main

    // Incrémenter le compteur pour ce mois
    if (offersByMonth[key]) {
        offersByMonth[key]++;
    } else {
        offersByMonth[key] = 1;
    }
});

// Création des labels (mois) et des données (nombre d'offres) pour Chart.js
<<<<<<< HEAD
let labels = [];
let dataCounts = [];
for (let key in offersByMonth) {
=======
var labels = [];
var dataCounts = [];
for (var key in offersByMonth) {
>>>>>>> main
    if (offersByMonth.hasOwnProperty(key)) {
        labels.push(key);
        dataCounts.push(offersByMonth[key]);
    }
}

// Configuration du graphique avec Chart.js
<<<<<<< HEAD
var ctx = document.getElementById('offrePublie');
=======
var ctx = document.getElementById('myChart');
>>>>>>> main
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: 'Nombre d\'offres publiées par mois',
            data: dataCounts,
            backgroundColor: 'rgba(75, 192, 192, 0.2)', // Couleur de fond des barres
            borderColor: 'rgba(75, 192, 192, 1)', // Couleur de la bordure des barres
            borderWidth: 1
        }]
    },
    options: {
        scales: {
<<<<<<< HEAD
            y: {
                
                beginAtZero: true
                
            }
=======
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
>>>>>>> main
        }
    }
});

</script>
